{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button,notification}from\"antd\";import Modal from\"../../../Modal\";import queryString from\"query-string\";import{withRouter}from\"react-router-dom\";import{getPostsApi}from\"../../../api/post\";import PostsList from\"../../../components/Admin/Blog/PostsList\";import Pagination from\"../../../components/Pagination\";import AddEditPostForm from\"../../../components/Admin/Blog/AddEditPostForm\";import\"./Blog.scss\";function Blog(props){var history=props.history,location=props.location;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),reloadPosts=_useState4[0],setReloadPosts=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),modalTitle=_useState6[0],setModalTitle=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isVisibleModal=_useState8[0],setIsVisibleModal=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),modalContent=_useState10[0],setModalContent=_useState10[1];var _queryString$parse=queryString.parse(location.search),_queryString$parse$pa=_queryString$parse.page,page=_queryString$parse$pa===void 0?1:_queryString$parse$pa;useEffect(function(){getPostsApi(page,8).then(function(response){if((response===null||response===void 0?void 0:response.code)!==200){notification[\"warning\"]({message:response.message});}else{setPosts(response.posts);}}).catch(function(){notification[\"error\"]({message:\"Error del servidor.\"});});setReloadPosts(false);},[page,reloadPosts]);var addPost=function addPost(){setIsVisibleModal(true);setModalTitle(\"Creando nuevo post\");setModalContent(/*#__PURE__*/React.createElement(AddEditPostForm,{setIsVisibleModal:setIsVisibleModal,setReloadPosts:setReloadPosts,post:null}));};var editPost=function editPost(post){setIsVisibleModal(true);setModalTitle(\"Editar post\");setModalContent(/*#__PURE__*/React.createElement(AddEditPostForm,{setIsVisibleModal:setIsVisibleModal,setReloadPosts:setReloadPosts,post:post}));};return/*#__PURE__*/React.createElement(\"div\",{className:\"blog\"},/*#__PURE__*/React.createElement(\"div\",{className:\"blog-add-post\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:addPost},\"Nuevo post\")),/*#__PURE__*/React.createElement(PostsList,{posts:posts,setReloadPosts:setReloadPosts,editPost:editPost}),/*#__PURE__*/React.createElement(Pagination,{posts:posts,location:location,history:history}),/*#__PURE__*/React.createElement(Modal,{title:modalTitle,isVisible:isVisibleModal,setIsVisible:setIsVisibleModal,width:\"75%\"},modalContent));}export default withRouter(Blog);","map":{"version":3,"sources":["C:/Users/metal/OneDrive/CursoMERN/ProyectoCurso/client/src/pages/admin/Blog/Blog.js"],"names":["React","useEffect","useState","Button","notification","Modal","queryString","withRouter","getPostsApi","PostsList","Pagination","AddEditPostForm","Blog","props","history","location","posts","setPosts","reloadPosts","setReloadPosts","modalTitle","setModalTitle","isVisibleModal","setIsVisibleModal","modalContent","setModalContent","parse","search","page","then","response","code","message","catch","addPost","editPost","post"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Button,notification} from \"antd\";\r\nimport Modal from \"../../../Modal\";\r\nimport queryString from \"query-string\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport { getPostsApi } from \"../../../api/post\";\r\nimport PostsList from \"../../../components/Admin/Blog/PostsList\";\r\nimport Pagination from \"../../../components/Pagination\";\r\nimport AddEditPostForm from \"../../../components/Admin/Blog/AddEditPostForm\";\r\n\r\nimport \"./Blog.scss\";\r\n\r\n  function Blog(props) {\r\n    const {history,location} = props;\r\n    const [posts,setPosts] = useState({});\r\n    const [reloadPosts, setReloadPosts] = useState(false);\r\n    const [modalTitle, setModalTitle] = useState(\"\");\r\n    const [isVisibleModal, setIsVisibleModal] = useState(false);\r\n    const [modalContent, setModalContent] = useState(null);\r\n    const {page = 1} = queryString.parse(location.search);\r\n  \r\n    useEffect(() => {\r\n     getPostsApi(page,8).then(response =>{\r\n       if(response?.code !==200){\r\n         notification[\"warning\"]({\r\n           message: response.message\r\n         });\r\n       }else{\r\n         setPosts(response.posts)\r\n       }\r\n     }).catch(() =>{\r\n       notification[\"error\"]({\r\n         message:\"Error del servidor.\"\r\n       })\r\n     })\r\n     setReloadPosts(false);\r\n    }, [page, reloadPosts])\r\n\r\n    const addPost= () =>{\r\n      setIsVisibleModal(true);\r\n      setModalTitle(\"Creando nuevo post\")\r\n      setModalContent(\r\n      <AddEditPostForm\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        setReloadPosts={setReloadPosts}\r\n        post={null}\r\n      />)\r\n    }\r\n\r\n    const editPost = post =>{\r\n      setIsVisibleModal(true);\r\n      setModalTitle(\"Editar post\")\r\n      setModalContent(\r\n      <AddEditPostForm\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        setReloadPosts={setReloadPosts}\r\n        post={post}\r\n      />)\r\n    }\r\n    return (\r\n        <div className=\"blog\">\r\n           <div className=\"blog-add-post\">\r\n                <Button \r\n                type=\"primary\"\r\n                onClick={addPost}\r\n                >\r\n                    Nuevo post\r\n                </Button>\r\n           </div>\r\n\r\n           <PostsList posts={posts} setReloadPosts={setReloadPosts} editPost={editPost}/>\r\n           <Pagination posts={posts} location={location} history={history}  />\r\n          <Modal\r\n            title={modalTitle}\r\n            isVisible={isVisibleModal}\r\n            setIsVisible={setIsVisibleModal}\r\n            width=\"75%\"\r\n          >\r\n            {modalContent}\r\n          </Modal>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Blog);\r\n"]},"metadata":{},"sourceType":"module"}