{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Antonio\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\src\\\\components\\\\Users\\\\ListUsers\\\\ListUsers.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Switch, List, Avatar, Button, notification, Modal as ModalAntd } from \"antd\";\nimport { EditOutlined, StopOutlined, DeleteOutlined, CheckOutlined } from \"@ant-design/icons\";\nimport EditUserForm from \"../EditUserForm\";\nimport AddUserForm from \"../AddUserForm\";\nimport { getAvatarApi, activateUserApi, deleteUserApi } from \"../../../api/user\";\nimport { getAccessTokenApi } from \"../../../api/auth\";\nimport Modal from \"../../../Modal\";\nimport NoAvatar from \"../../../assets/images/png/9.1 no-avatar.png\";\nimport \".//ListUsers.scss\";\nconst {\n  confirm\n} = ModalAntd;\nexport default function ListUsers(props) {\n  const {\n    usersActive,\n    usersInactive,\n    setReloadUsers\n  } = props;\n  const [viewUsersActive, setViewUsersActive] = useState(true);\n  const [isVisibleModal, setIsVisibleModal] = useState(false);\n  const [modalTitle, setModalTitle] = useState(\"\");\n  const [modalContent, setModalContent] = useState(null);\n\n  const addUserModal = () => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo usuario\");\n    setModalContent( /*#__PURE__*/React.createElement(AddUserForm, {\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadUsers: setReloadUsers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 11\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-users\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-users-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list-users-header-switch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    defaultChecked: true,\n    onChange: () => {\n      setViewUsersActive(!viewUsersActive);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 17\n    }\n  }, viewUsersActive ? \" Usuarios Activos\" : \" Usuarios Inactivos\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: addUserModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 14\n    }\n  }, \"Nuevo Usuario...\")), viewUsersActive ? /*#__PURE__*/React.createElement(UsersActive, {\n    usersActive: usersActive,\n    setIsVisibleModal: setIsVisibleModal,\n    setModalTitle: setModalTitle,\n    setModalContent: setModalContent,\n    setReloadUsers: setReloadUsers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 18\n    }\n  }) : /*#__PURE__*/React.createElement(UsersInactive, {\n    usersInactive: usersInactive,\n    setReloadUsers: setReloadUsers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    title: modalTitle,\n    isVisible: isVisibleModal,\n    setIsVisible: setIsVisibleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, modalContent));\n}\n\nfunction UsersActive(props) {\n  const {\n    usersActive,\n    setIsVisibleModal,\n    setModalTitle,\n    setModalContent,\n    setReloadUsers\n  } = props;\n\n  const editUser = user => {\n    setIsVisibleModal(true);\n    setModalTitle(`Editando Usuario: ${user.name} ${user.lastName}`);\n    setModalContent( /*#__PURE__*/React.createElement(EditUserForm, {\n      user: user,\n      setIsVisibleModal: setIsVisibleModal,\n      setReloadUsers: setReloadUsers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 26\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(List, {\n    className: \"users-active\",\n    itemLayout: \"horizontal\",\n    dataSource: usersActive,\n    renderItem: user => /*#__PURE__*/React.createElement(UserActive, {\n      user: user,\n      editUser: editUser,\n      setReloadUsers: setReloadUsers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 30\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 10\n    }\n  });\n}\n\nfunction UserActive(props) {\n  const {\n    user,\n    editUser,\n    setReloadUsers\n  } = props;\n  const [avatar, setAvatar] = useState(null);\n  useEffect(() => {\n    if (user.avatar) {\n      getAvatarApi(user.avatar).then(response => {\n        setAvatar(response);\n      });\n    } else {\n      setAvatar(null);\n    }\n  }, [user]);\n\n  const desactivateUser = () => {\n    const accessToken = getAccessTokenApi();\n    activateUserApi(accessToken, user._id, false).then(response => {\n      notification[\"success\"]({\n        message: response\n      });\n      setReloadUsers(true);\n    }).catch(err => {\n      notification[\"error\"]({\n        message: err\n      });\n    });\n  };\n\n  const showDeleteConfirm = () => {\n    const accessToken = getAccessTokenApi();\n    confirm({\n      title: \"Eliminando el usuario\",\n      content: `Estas seguro que deseas eliminar a ${user.email}`,\n      okText: \"Eliminar\",\n      okType: \"danger\",\n      cancelText: \"Cancelar\",\n\n      onOk() {\n        deleteUserApi(accessToken, user._id).then(response => {\n          notification[\"success\"]({\n            message: response\n          });\n          setReloadUsers(true);\n        }).catch(err => {\n          notification[\"error\"]({\n            message: err\n          });\n        });\n      }\n\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(List.Item, {\n    actions: [/*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: () => editUser(user),\n      icon: /*#__PURE__*/React.createElement(EditOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"danger\",\n      onClick: desactivateUser,\n      icon: /*#__PURE__*/React.createElement(StopOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 23\n        }\n      }),\n      title: \"Desactivar Ususario\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"danger\",\n      onClick: showDeleteConfirm,\n      icon: /*#__PURE__*/React.createElement(DeleteOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 19\n        }\n      }),\n      tile: \"Eliminar Usuario\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 13\n      }\n    })],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(List.Item.Meta, {\n    avatar: /*#__PURE__*/React.createElement(Avatar, {\n      src: avatar ? avatar : NoAvatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }),\n    title: `\n            ${user.name ? user.name : \"No existe nombre\"}\n            ${user.lastName ? user.lastName : \"No existe Apellido\"}\n        \n            `,\n    description: user.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }\n  }));\n}\n\nfunction UsersInactive(props) {\n  const {\n    usersInactive,\n    setReloadUsers\n  } = props;\n  return /*#__PURE__*/React.createElement(List, {\n    className: \"users-active\",\n    itemLayout: \"horizontal\",\n    dataSource: usersInactive,\n    renderItem: user => /*#__PURE__*/React.createElement(UserInactive, {\n      user: user,\n      setReloadUsers: setReloadUsers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 33\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  });\n}\n\nfunction UserInactive(props) {\n  const {\n    user,\n    setReloadUsers\n  } = props;\n  const [avatar, setAvatar] = useState(null);\n  useEffect(() => {\n    if (user.avatar) {\n      getAvatarApi(user.avatar).then(response => {\n        setAvatar(response);\n      });\n    } else {\n      setAvatar(null);\n    }\n  }, [user]);\n\n  const activateUser = () => {\n    const token = getAccessTokenApi();\n    activateUserApi(token, user._id, true).then(response => {\n      notification[\"success\"]({\n        message: response\n      });\n      setReloadUsers(true);\n    }).catch(err => {\n      notification[\"error\"]({\n        message: err.message\n      });\n    });\n  };\n\n  const showDeleteConfirm = () => {\n    const accessToken = getAccessTokenApi();\n    confirm({\n      title: \"Eliminando el usuario\",\n      content: `Estas seguro que deseas eliminar a ${user.email}`,\n      okText: \"Eliminar\",\n      okType: \"danger\",\n      cancelText: \"Cancelar\",\n\n      onOk() {\n        deleteUserApi(accessToken, user._id).then(response => {\n          notification[\"success\"]({\n            message: response\n          });\n          setReloadUsers(true);\n        }).catch(err => {\n          notification[\"error\"]({\n            message: err\n          });\n        });\n      }\n\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(List.Item, {\n    actions: [/*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      onClick: activateUser,\n      icon: /*#__PURE__*/React.createElement(CheckOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"danger\",\n      onClick: showDeleteConfirm,\n      icon: /*#__PURE__*/React.createElement(DeleteOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    })],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(List.Item.Meta, {\n    avatar: /*#__PURE__*/React.createElement(Avatar, {\n      src: avatar ? avatar : NoAvatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 25\n      }\n    }),\n    title: `\n                ${user.name ? user.name : \"No existe nombre\"}\n                ${user.lastName ? user.lastName : \"No existe Apellido\"}\n                \n                `,\n    description: user.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 17\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Users/Antonio/OneDrive/CursoMERN/ProyectoCurso/client/src/components/Users/ListUsers/ListUsers.js"],"names":["React","useState","useEffect","Switch","List","Avatar","Button","notification","Modal","ModalAntd","EditOutlined","StopOutlined","DeleteOutlined","CheckOutlined","EditUserForm","AddUserForm","getAvatarApi","activateUserApi","deleteUserApi","getAccessTokenApi","NoAvatar","confirm","ListUsers","props","usersActive","usersInactive","setReloadUsers","viewUsersActive","setViewUsersActive","isVisibleModal","setIsVisibleModal","modalTitle","setModalTitle","modalContent","setModalContent","addUserModal","UsersActive","editUser","user","name","lastName","UserActive","avatar","setAvatar","then","response","desactivateUser","accessToken","_id","message","catch","err","showDeleteConfirm","title","content","email","okText","okType","cancelText","onOk","UsersInactive","UserInactive","activateUser","token"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {Switch,List,Avatar,Button,notification,Modal as ModalAntd} from \"antd\";\r\nimport {EditOutlined,StopOutlined,DeleteOutlined,CheckOutlined  } from \"@ant-design/icons\";\r\nimport EditUserForm from \"../EditUserForm\"\r\nimport AddUserForm from \"../AddUserForm\"\r\nimport {getAvatarApi,activateUserApi,deleteUserApi} from \"../../../api/user\"\r\nimport {getAccessTokenApi} from \"../../../api/auth\"\r\nimport Modal from \"../../../Modal\"\r\n \r\n\r\n import NoAvatar from \"../../../assets/images/png/9.1 no-avatar.png\"\r\n import \".//ListUsers.scss\"\r\n\r\n const {confirm}= ModalAntd;\r\n\r\n export default function ListUsers(props){\r\n     const {usersActive, usersInactive,setReloadUsers} =  props;\r\n     const [viewUsersActive, setViewUsersActive] = useState(true)\r\n     const [isVisibleModal, setIsVisibleModal] = useState(false)\r\n     const [modalTitle, setModalTitle] = useState(\"\")\r\n     const [modalContent, setModalContent] = useState(null)\r\n    \r\n     const addUserModal = ()=>{\r\n        setIsVisibleModal(true);\r\n        setModalTitle(\"Creando nuevo usuario\");\r\n        setModalContent(\r\n          <AddUserForm \r\n          setIsVisibleModal={setIsVisibleModal} \r\n          setReloadUsers={setReloadUsers}\r\n          />\r\n        )\r\n     }\r\n     return(\r\n        \r\n         <div className=\"list-users\">\r\n\r\n         <div className=\"list-users-header\">\r\n             <div className=\"list-users-header-switch\">\r\n                <Switch defaultChecked onChange={()=>{\r\n                    setViewUsersActive(!viewUsersActive)\r\n                }}\r\n                />\r\n                <span>\r\n                    {viewUsersActive ? \" Usuarios Activos\" : \" Usuarios Inactivos\"}\r\n                </span>\r\n             </div>\r\n             \r\n             <Button type=\"primary\" onClick={addUserModal}>\r\n                 Nuevo Usuario...\r\n             </Button>\r\n\r\n        </div>\r\n             {/*  */}\r\n\r\n            {viewUsersActive ?(\r\n                 <UsersActive \r\n                 usersActive={usersActive} \r\n                 setIsVisibleModal={setIsVisibleModal} \r\n                 setModalTitle={setModalTitle}\r\n                 setModalContent={setModalContent}\r\n                 setReloadUsers={setReloadUsers}\r\n                 />\r\n                  ):(\r\n                 <UsersInactive usersInactive={usersInactive} setReloadUsers ={setReloadUsers}/>\r\n                  ) }\r\n            \r\n            <Modal  title={modalTitle} isVisible={isVisibleModal} setIsVisible={setIsVisibleModal} >\r\n                {modalContent}\r\n            </Modal>\r\n\r\n         </div>\r\n     )\r\n }\r\n\r\n function UsersActive(props){\r\n     const {usersActive,setIsVisibleModal,setModalTitle,setModalContent,setReloadUsers} = props;\r\n     \r\n     const editUser = user =>{\r\n         setIsVisibleModal(true)\r\n         setModalTitle(`Editando Usuario: ${user.name} ${user.lastName}`);\r\n         setModalContent(<EditUserForm user={user} setIsVisibleModal={setIsVisibleModal} setReloadUsers={setReloadUsers}/>);\r\n     }\r\n      \r\n\r\n   \r\n     return (\r\n         <List \r\n         className=\"users-active\"\r\n         itemLayout=\"horizontal\"\r\n         dataSource={usersActive}\r\n         renderItem={user => <UserActive user={user} editUser={editUser} setReloadUsers={setReloadUsers}/>}\r\n         />\r\n     )\r\n }\r\n\r\n\r\n function UserActive(props){\r\n  const { user, editUser,setReloadUsers} = props;\r\n  const [avatar, setAvatar] = useState(null);\r\n\r\n\r\n  useEffect(()=>{\r\n     if (user.avatar){\r\n         getAvatarApi(user.avatar).then(response =>{\r\n             setAvatar(response)\r\n         })\r\n     }else{\r\n         setAvatar(null);\r\n     }\r\n  },[user])\r\n\r\n\r\n  const desactivateUser = ()=>{\r\n    const accessToken = getAccessTokenApi();\r\n    activateUserApi(accessToken, user._id, false).then(response=>{\r\n        notification[\"success\"]({\r\n            message: response\r\n        })\r\n        setReloadUsers(true);\r\n    }).catch(err=>{\r\n        notification[\"error\"]({\r\n            message: err\r\n        })\r\n    })\r\n }\r\n  \r\n\r\n const showDeleteConfirm = () =>{\r\n     const accessToken = getAccessTokenApi();\r\n\r\n     confirm({\r\n         title: \"Eliminando el usuario\",\r\n         content: `Estas seguro que deseas eliminar a ${user.email}`,\r\n         okText: \"Eliminar\",\r\n         okType: \"danger\",\r\n         cancelText: \"Cancelar\",\r\n         onOk(){\r\n            deleteUserApi(accessToken,user._id).then(response =>{\r\n                 notification[\"success\"]({\r\n                     message: response\r\n                 })\r\n                 setReloadUsers(true);\r\n             }).catch(err=>{\r\n                 notification[\"error\"]({\r\n                     message: err \r\n                 })\r\n             })\r\n         }\r\n     })\r\n }\r\n  return(\r\n        <List.Item\r\n                \r\n        actions={[\r\n            <Button\r\n            type=\"primary\"\r\n                onClick={ () => editUser(user)}\r\n                icon={<EditOutlined/>}\r\n            />,\r\n\r\n            <Button\r\n                type=\"danger\"\r\n                onClick={desactivateUser}\r\n                icon={<StopOutlined/>}\r\n                title=\"Desactivar Ususario\"\r\n            />,\r\n            <Button\r\n            type=\"danger\"\r\n            onClick={showDeleteConfirm}\r\n            icon={<DeleteOutlined/>}\r\n            tile=\"Eliminar Usuario\"\r\n            />\r\n\r\n        \r\n            \r\n        ]}\r\n    \r\n    >\r\n        \r\n        <List.Item.Meta\r\n            avatar={<Avatar src={avatar ? avatar : NoAvatar}/>}\r\n            title={`\r\n            ${user.name ? user.name : \"No existe nombre\"}\r\n            ${user.lastName ? user.lastName : \"No existe Apellido\"}\r\n        \r\n            `  \r\n            }\r\n            description={user.email}\r\n            \r\n        />\r\n    </List.Item>\r\n    )\r\n    }\r\n\r\n    function UsersInactive(props){\r\n        const {usersInactive,setReloadUsers} = props\r\n        return ( \r\n            <List \r\n            className=\"users-active\"\r\n            itemLayout=\"horizontal\"\r\n            dataSource={usersInactive}\r\n            renderItem={user => <UserInactive user={user} setReloadUsers={setReloadUsers}/>}\r\n            />\r\n        )\r\n}\r\n\r\n    function UserInactive (props){\r\n        const {user,setReloadUsers} = props;\r\n        const [avatar, setAvatar] = useState(null);\r\n  \r\n        useEffect(()=>{\r\n           if (user.avatar){\r\n               getAvatarApi(user.avatar).then(response =>{\r\n                   setAvatar(response)\r\n               })\r\n           }else{\r\n               setAvatar(null);\r\n           }\r\n        },[user])\r\n\r\n\r\n\r\n        const activateUser = ()=>{\r\n            const token  = getAccessTokenApi();\r\n            activateUserApi(token,user._id,true).then(response=>{\r\n                notification[\"success\"]({\r\n                    message : response\r\n                })\r\n                setReloadUsers(true)\r\n            }).catch(err =>{\r\n               notification[\"error\"]({\r\n                   message : err.message\r\n               })\r\n            })\r\n        }\r\n\r\n        const showDeleteConfirm = () =>{\r\n            const accessToken = getAccessTokenApi();\r\n       \r\n            confirm({\r\n                title: \"Eliminando el usuario\",\r\n                content: `Estas seguro que deseas eliminar a ${user.email}`,\r\n                okText: \"Eliminar\",\r\n                okType: \"danger\",\r\n                cancelText: \"Cancelar\",\r\n                onOk(){\r\n                   deleteUserApi(accessToken,user._id).then(response =>{\r\n                        notification[\"success\"]({\r\n                            message: response\r\n                        })\r\n                        setReloadUsers(true);\r\n                    }).catch(err=>{\r\n                        notification[\"error\"]({\r\n                            message: err \r\n                        })\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        \r\n        return(\r\n            <List.Item\r\n                \r\n            actions={[\r\n                <Button\r\n                    type=\"primary\"\r\n                    onClick={activateUser}\r\n                    icon={<CheckOutlined/>}\r\n                />,\r\n\r\n                \r\n                <Button\r\n                type=\"danger\"\r\n                onClick={showDeleteConfirm}\r\n                icon={<DeleteOutlined/>}\r\n                />\r\n\r\n                \r\n                \r\n            ]}\r\n            \r\n            >\r\n            \r\n                <List.Item.Meta\r\n                avatar={<Avatar src={avatar ? avatar : NoAvatar}/>}\r\n                title={`\r\n                ${user.name ? user.name : \"No existe nombre\"}\r\n                ${user.lastName ? user.lastName : \"No existe Apellido\"}\r\n                \r\n                `  \r\n                }\r\n                description={user.email}\r\n                />\r\n            </List.Item>\r\n        )\r\n    }"]},"metadata":{},"sourceType":"module"}