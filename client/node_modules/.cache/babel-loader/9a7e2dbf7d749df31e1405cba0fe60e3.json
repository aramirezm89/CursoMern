{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Switch,List,Button,Modal as ModalAntd,notification}from\"antd\";import{EditOutlined,DeleteOutlined}from\"../../../../../node_modules/@ant-design/icons\";import Modal from\"../../../../Modal\";import DragSortableList from\"react-drag-sortable\";import{updateMenuApi,activateMenuApi,deleteMenuApi}from\"../../../../api/menu\";import{getAccessTokenApi}from\"../../../../api/auth\";import AddMenuWebForm from'../AddMenuWebForm';import EditMenuWebForm from\"..//EditMenuWebForm\";import\"./MenuWebList.scss\";var confirm=ModalAntd.confirm;export default function MenuWebList(props){var menu=props.menu,setReloadMenuWeb=props.setReloadMenuWeb;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listItems=_useState2[0],setListItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isVisibleModal=_useState4[0],setIsVisibleModal=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),modalTitle=_useState6[0],setModalTitle=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),modalContent=_useState8[0],setModalContent=_useState8[1];useEffect(function(){var listItemsArray=[];menu.forEach(function(item){listItemsArray.push({content:/*#__PURE__*/React.createElement(MenuItems,{item:item,activateMenu:activateMenu,editMenuWebModal:editMenuWebModal,deleteMenu:deleteMenu})});});setListItems(listItemsArray);},[menu]);var activateMenu=function activateMenu(menu,status){var accessToken=getAccessTokenApi();activateMenuApi(accessToken,menu._id,status).then(function(response){notification[\"success\"]({message:response});});};var onSort=function onSort(sortedList,dropEvent){var accesToken=getAccessTokenApi();sortedList.forEach(function(item){var _id=item.content.props.item._id;var order=item.rank;updateMenuApi(accesToken,_id,{order:order});});};var addMenuWebModal=function addMenuWebModal(){setIsVisibleModal(true);setModalTitle(\"Creando nuevo Menú\");setModalContent(/*#__PURE__*/React.createElement(AddMenuWebForm,{setIsVisibleModal:setIsVisibleModal,setReloadMenuWeb:setReloadMenuWeb}));};var deleteMenu=function deleteMenu(menu){var accesToken=getAccessTokenApi();confirm({title:\"Eliminando menu\",content:\"\\xBFEstas seguro que deseas eliminar el menu \".concat(menu.title),okText:\"Eliminar\",okType:\"danger\",cancelText:\"cancelar\",onOk:function onOk(){deleteMenuApi(accesToken,menu._id).then(function(response){notification[\"success\"]({message:response});setReloadMenuWeb(true);}).catch(function(){notification[\"error\"]({message:\"Error del servidor, intentelo más tarde.\"});});}});};var editMenuWebModal=function editMenuWebModal(menu){setIsVisibleModal(true);setModalTitle(\"Editando Menu: \".concat(menu.title));setModalContent(/*#__PURE__*/React.createElement(EditMenuWebForm,{setIsVisibleModal:setIsVisibleModal,setReloadMenuWeb:setReloadMenuWeb,menu:menu}));};return/*#__PURE__*/React.createElement(\"div\",{className:\"menu-web-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu-web-list_header\"},/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:addMenuWebModal},\"Crear men\\xFA\")),/*#__PURE__*/React.createElement(\"div\",{className:\"menu-web-list_items\"},/*#__PURE__*/React.createElement(DragSortableList,{items:listItems,onSort:onSort,type:\"vertical\"})),/*#__PURE__*/React.createElement(Modal,{title:modalTitle,isVisible:isVisibleModal,setIsVisible:setIsVisibleModal},modalContent));}function MenuItems(props){var item=props.item,activateMenu=props.activateMenu,editMenuWebModal=props.editMenuWebModal,deleteMenu=props.deleteMenu;return/*#__PURE__*/React.createElement(List.Item,{actions:[/*#__PURE__*/React.createElement(Switch,{defaultChecked:item.active,onChange:function onChange(e){return activateMenu(item,e);}}),/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:function onClick(){return editMenuWebModal(item);}},/*#__PURE__*/React.createElement(EditOutlined,null)),/*#__PURE__*/React.createElement(Button,{type:\"danger\",onClick:function onClick(){return deleteMenu(item);}},/*#__PURE__*/React.createElement(DeleteOutlined,null))]},/*#__PURE__*/React.createElement(List.Item.Meta,{title:item.title,description:item.url}));}","map":{"version":3,"sources":["C:/Users/metal/OneDrive/CursoMERN/ProyectoCurso/client/src/components/Admin/MenuWeb/MenuWebList/MenuWebList.js"],"names":["React","useState","useEffect","Switch","List","Button","Modal","ModalAntd","notification","EditOutlined","DeleteOutlined","DragSortableList","updateMenuApi","activateMenuApi","deleteMenuApi","getAccessTokenApi","AddMenuWebForm","EditMenuWebForm","confirm","MenuWebList","props","menu","setReloadMenuWeb","listItems","setListItems","isVisibleModal","setIsVisibleModal","modalTitle","setModalTitle","modalContent","setModalContent","listItemsArray","forEach","item","push","content","activateMenu","editMenuWebModal","deleteMenu","status","accessToken","_id","then","response","message","onSort","sortedList","dropEvent","accesToken","order","rank","addMenuWebModal","title","okText","okType","cancelText","onOk","catch","MenuItems","active","e","url"],"mappings":"wLAAA,MAAOA,CAAAA,KAAP,EAAcC,QAAd,CAAuBC,SAAvB,KAAuC,OAAvC,CACA,OAAQC,MAAR,CAAeC,IAAf,CAAoBC,MAApB,CAA2BC,KAAK,GAAIC,CAAAA,SAApC,CAA8CC,YAA9C,KAAiE,MAAjE,CACA,OAAQC,YAAR,CAAqBC,cAArB,KAA0C,+CAA1C,CACA,MAAOJ,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAQK,CAAAA,gBAAR,KAA8B,qBAA9B,CACA,OAAQC,aAAR,CAAsBC,eAAtB,CAAsCC,aAAtC,KAA0D,sBAA1D,CACA,OAAQC,iBAAR,KAAgC,sBAAhC,CACA,MAAOC,CAAAA,cAAP,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,qBAA5B,CAEA,MAAO,oBAAP,C,GAGOC,CAAAA,O,CAAWX,S,CAAXW,O,CACP,cAAe,SAASC,CAAAA,WAAT,CAAqBC,KAArB,CAA2B,IACnCC,CAAAA,IADmC,CACRD,KADQ,CACnCC,IADmC,CAC7BC,gBAD6B,CACRF,KADQ,CAC7BE,gBAD6B,eAERrB,QAAQ,CAAC,EAAD,CAFA,wCAEnCsB,SAFmC,eAExBC,YAFwB,8BAGGvB,QAAQ,CAAC,KAAD,CAHX,yCAGnCwB,cAHmC,eAGnBC,iBAHmB,8BAINzB,QAAQ,CAAC,EAAD,CAJF,yCAInC0B,UAJmC,eAIvBC,aAJuB,8BAKD3B,QAAQ,CAAC,IAAD,CALP,yCAKnC4B,YALmC,eAKpBC,eALoB,eAQ1C5B,SAAS,CAAC,UAAI,CACV,GAAM6B,CAAAA,cAAc,CAAG,EAAvB,CAEAV,IAAI,CAACW,OAAL,CAAa,SAAAC,IAAI,CAAG,CAClBF,cAAc,CAACG,IAAf,CAAoB,CACpBC,OAAO,cACP,oBAAC,SAAD,EAAW,IAAI,CAAEF,IAAjB,CACU,YAAY,CAAEG,YADxB,CAEU,gBAAgB,CAAEC,gBAF5B,CAGU,UAAU,CAAEC,UAHtB,EAFoB,CAApB,EAQD,CATD,EAUAd,YAAY,CAACO,cAAD,CAAZ,CACD,CAdM,CAcL,CAACV,IAAD,CAdK,CAAT,CAgBE,GAAMe,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACf,IAAD,CAAMkB,MAAN,CAAgB,CACnC,GAAMC,CAAAA,WAAW,CAAGzB,iBAAiB,EAArC,CACAF,eAAe,CAAC2B,WAAD,CAAanB,IAAI,CAACoB,GAAlB,CAAsBF,MAAtB,CAAf,CAA6CG,IAA7C,CAAkD,SAAAC,QAAQ,CAAE,CAC1DnC,YAAY,CAAC,SAAD,CAAZ,CAAwB,CACtBoC,OAAO,CAAED,QADa,CAAxB,EAGD,CAJD,EAKD,CAPD,CASF,GAAME,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,UAAD,CAAYC,SAAZ,CAAyB,CAEtC,GAAMC,CAAAA,UAAU,CAAGjC,iBAAiB,EAApC,CAEA+B,UAAU,CAACd,OAAX,CAAoB,SAAAC,IAAI,CAAG,IACjBQ,CAAAA,GADiB,CACVR,IAAI,CAACE,OAAL,CAAaf,KAAb,CAAmBa,IADT,CACjBQ,GADiB,CAExB,GAAMQ,CAAAA,KAAK,CAAGhB,IAAI,CAACiB,IAAnB,CACAtC,aAAa,CAACoC,UAAD,CAAYP,GAAZ,CAAgB,CAACQ,KAAK,CAALA,KAAD,CAAhB,CAAb,CACF,CAJD,EAKA,CATF,CAWE,GAAOE,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAK,CAC5BzB,iBAAiB,CAAC,IAAD,CAAjB,CACAE,aAAa,CAAC,oBAAD,CAAb,CACAE,eAAe,cACb,oBAAC,cAAD,EACE,iBAAiB,CAAEJ,iBADrB,CAEE,gBAAgB,CAAEJ,gBAFpB,EADa,CAAf,CAMD,CATD,CAWA,GAAMgB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAAjB,IAAI,CAAG,CAExB,GAAM2B,CAAAA,UAAU,CAAGjC,iBAAiB,EAApC,CAEAG,OAAO,CAAC,CACNkC,KAAK,CAAC,iBADA,CAENjB,OAAO,wDAA8Cd,IAAI,CAAC+B,KAAnD,CAFD,CAGNC,MAAM,CAAC,UAHD,CAINC,MAAM,CAAC,QAJD,CAKNC,UAAU,CAAC,UALL,CAMNC,IANM,gBAMA,CACJ1C,aAAa,CAACkC,UAAD,CAAY3B,IAAI,CAACoB,GAAjB,CAAb,CAAmCC,IAAnC,CAAwC,SAAAC,QAAQ,CAAI,CAClDnC,YAAY,CAAC,SAAD,CAAZ,CAAwB,CACtBoC,OAAO,CAAED,QADa,CAAxB,EAGArB,gBAAgB,CAAC,IAAD,CAAhB,CACD,CALD,EAKGmC,KALH,CAKS,UAAM,CACbjD,YAAY,CAAC,OAAD,CAAZ,CAAsB,CACpBoC,OAAO,CAAE,0CADW,CAAtB,EAGD,CATD,EAUD,CAjBK,CAAD,CAAP,CAmBD,CAvBD,CAyBA,GAAMP,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAhB,IAAI,CAAG,CAC9BK,iBAAiB,CAAC,IAAD,CAAjB,CACAE,aAAa,0BAAmBP,IAAI,CAAC+B,KAAxB,EAAb,CACAtB,eAAe,cACb,oBAAC,eAAD,EACE,iBAAiB,CAAEJ,iBADrB,CAEE,gBAAgB,CAAIJ,gBAFtB,CAGE,IAAI,CAAID,IAHV,EADa,CAAf,CAOD,CAVD,CAYD,mBACI,2BAAK,SAAS,CAAC,eAAf,eACG,2BAAK,SAAS,CAAC,sBAAf,eACI,oBAAC,MAAD,EAAQ,IAAI,CAAC,SAAb,CAAuB,OAAO,CAAE8B,eAAhC,kBADJ,CADH,cAIG,2BAAK,SAAS,CAAC,qBAAf,eACI,oBAAC,gBAAD,EAAkB,KAAK,CAAE5B,SAAzB,CAAoC,MAAM,CAAEsB,MAA5C,CAAoD,IAAI,CAAC,UAAzD,EADJ,CAJH,cAQG,oBAAC,KAAD,EACA,KAAK,CAAElB,UADP,CAEA,SAAS,CAAEF,cAFX,CAGA,YAAY,CAAEC,iBAHd,EAKGG,YALH,CARH,CADJ,CAkBA,CAMD,QAAS6B,CAAAA,SAAT,CAAmBtC,KAAnB,CAAyB,IAChBa,CAAAA,IADgB,CACmCb,KADnC,CAChBa,IADgB,CACVG,YADU,CACmChB,KADnC,CACVgB,YADU,CACIC,gBADJ,CACmCjB,KADnC,CACIiB,gBADJ,CACqBC,UADrB,CACmClB,KADnC,CACqBkB,UADrB,CAGvB,mBACE,oBAAC,IAAD,CAAM,IAAN,EACC,OAAO,CAAE,cACR,oBAAC,MAAD,EAAQ,cAAc,CAAEL,IAAI,CAAC0B,MAA7B,CACA,QAAQ,CAAE,kBAAAC,CAAC,QAAIxB,CAAAA,YAAY,CAACH,IAAD,CAAM2B,CAAN,CAAhB,EADX,EADQ,cAKR,oBAAC,MAAD,EAAQ,IAAI,CAAE,SAAd,CAAyB,OAAO,CAAE,yBAAMvB,CAAAA,gBAAgB,CAACJ,IAAD,CAAtB,EAAlC,eACI,oBAAC,YAAD,MADJ,CALQ,cAQR,oBAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAE,yBAAIK,CAAAA,UAAU,CAACL,IAAD,CAAd,EAA/B,eACI,oBAAC,cAAD,MADJ,CARQ,CADV,eAcE,oBAAC,IAAD,CAAM,IAAN,CAAW,IAAX,EAAgB,KAAK,CAAEA,IAAI,CAACmB,KAA5B,CAAmC,WAAW,CAAEnB,IAAI,CAAC4B,GAArD,EAdF,CADF,CAkBD","sourcesContent":["import React,{useState,useEffect} from 'react'\r\nimport {Switch,List,Button,Modal as ModalAntd,notification} from \"antd\";\r\nimport {EditOutlined,DeleteOutlined} from \"../../../../../node_modules/@ant-design/icons\";\r\nimport Modal from \"../../../../Modal\";\r\nimport  DragSortableList from \"react-drag-sortable\";\r\nimport {updateMenuApi,activateMenuApi,deleteMenuApi} from \"../../../../api/menu\"\r\nimport {getAccessTokenApi} from \"../../../../api/auth\"\r\nimport AddMenuWebForm from '../AddMenuWebForm';\r\nimport EditMenuWebForm from \"..//EditMenuWebForm\";\r\n\r\nimport \"./MenuWebList.scss\";\r\n\r\n\r\nconst {confirm} = ModalAntd;\r\nexport default function MenuWebList(props){\r\nconst {menu, setReloadMenuWeb} =  props;\r\nconst [listItems, setListItems] = useState([]);\r\nconst [isVisibleModal, setIsVisibleModal] =  useState(false);\r\nconst [modalTitle, setModalTitle] = useState(\"\");\r\nconst [modalContent , setModalContent] = useState(null);\r\n\r\n\r\nuseEffect(()=>{\r\n    const listItemsArray = [];\r\n\r\n    menu.forEach(item =>{\r\n      listItemsArray.push({\r\n      content:(\r\n      <MenuItems item={item} \r\n                activateMenu={activateMenu} \r\n                editMenuWebModal={editMenuWebModal} \r\n                deleteMenu={deleteMenu}\r\n      />\r\n        )})\r\n    });\r\n    setListItems(listItemsArray);\r\n  },[menu])\r\n\r\n  const activateMenu = (menu,status) =>{\r\n    const accessToken = getAccessTokenApi();\r\n    activateMenuApi(accessToken,menu._id,status).then(response=>{\r\n      notification[\"success\"]({\r\n        message: response\r\n      });\r\n    });\r\n  }\r\n\r\nconst onSort = (sortedList,dropEvent) =>{\r\n \r\n  const accesToken = getAccessTokenApi();\r\n\r\n  sortedList.forEach( item =>{\r\n     const {_id} = item.content.props.item;\r\n     const order = item.rank;\r\n     updateMenuApi(accesToken,_id,{order});\r\n  })\r\n }\r\n\r\n  const  addMenuWebModal = () =>{\r\n    setIsVisibleModal(true);\r\n    setModalTitle(\"Creando nuevo Menú\");\r\n    setModalContent(\r\n      <AddMenuWebForm\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        setReloadMenuWeb={setReloadMenuWeb}\r\n      />\r\n    )\r\n  }\r\n\r\n  const deleteMenu = menu =>{\r\n   \r\n    const accesToken = getAccessTokenApi();\r\n\r\n    confirm({\r\n      title:\"Eliminando menu\",\r\n      content:`¿Estas seguro que deseas eliminar el menu ${menu.title}`,\r\n      okText:\"Eliminar\",\r\n      okType:\"danger\",\r\n      cancelText:\"cancelar\",\r\n      onOk(){\r\n        deleteMenuApi(accesToken,menu._id).then(response => {\r\n          notification[\"success\"]({\r\n            message: response\r\n          });\r\n          setReloadMenuWeb(true)\r\n        }).catch(() => {\r\n          notification[\"error\"]({\r\n            message: \"Error del servidor, intentelo más tarde.\"\r\n          })\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  const editMenuWebModal = menu =>{\r\n    setIsVisibleModal(true);\r\n    setModalTitle(`Editando Menu: ${menu.title}`);\r\n    setModalContent(\r\n      <EditMenuWebForm\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        setReloadMenuWeb = {setReloadMenuWeb}\r\n        menu = {menu}\r\n      />\r\n    )\r\n  }\r\n\r\n return(\r\n     <div className=\"menu-web-list\">\r\n        <div className=\"menu-web-list_header\">\r\n            <Button type=\"primary\" onClick={addMenuWebModal}>Crear menú</Button>\r\n        </div>\r\n        <div className=\"menu-web-list_items\">\r\n            <DragSortableList items={listItems} onSort={onSort} type=\"vertical\"/>\r\n        </div>\r\n\r\n        <Modal\r\n        title={modalTitle}\r\n        isVisible={isVisibleModal}\r\n        setIsVisible={setIsVisibleModal}\r\n        >\r\n          {modalContent}\r\n        </Modal>\r\n     </div>\r\n )\r\n}\r\n\r\n\r\n\r\n\r\n\r\nfunction MenuItems(props){\r\n  const {item, activateMenu, editMenuWebModal,deleteMenu} = props;\r\n\r\n  return(\r\n    <List.Item\r\n     actions={[\r\n      <Switch defaultChecked={item.active} \r\n      onChange={e => activateMenu(item,e)\r\n     \r\n      }/>,\r\n      <Button type={\"primary\"} onClick={() => editMenuWebModal(item)}>\r\n          <EditOutlined/>\r\n      </Button>,\r\n      <Button type=\"danger\" onClick={()=>deleteMenu(item)}>\r\n          <DeleteOutlined/>\r\n      </Button>\r\n     ]}>\r\n\r\n      <List.Item.Meta title={item.title} description={item.url} />\r\n    </List.Item>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}