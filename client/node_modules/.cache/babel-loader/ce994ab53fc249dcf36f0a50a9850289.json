{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Antonio\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\src\\\\pages\\\\admin\\\\Blog\\\\Blog.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Button, notification } from \"antd\";\nimport Modal from \"../../../Modal\";\nimport queryString from \"query-string\";\nimport { withRouter } from \"react-router-dom\";\nimport { getPostsApi } from \"../../../api/post\";\nimport PostsList from \"../../../components/Admin/Blog/PostsList\";\nimport Pagination from \"../../../components/Pagination\";\nimport AddEditPostForm from \"../../../components/Admin/Blog/AddEditPostForm\";\nimport \"./Blog.scss\";\n\nfunction Blog(props) {\n  const {\n    history,\n    location\n  } = props;\n  const [posts, setPosts] = useState({});\n  const [reloadPosts, setReloadPosts] = useState(false);\n  const [modalTitle, setModalTitle] = useState(\"\");\n  const [isVisibleModal, setIsVisibleModal] = useState(false);\n  const [modalContent, setModalContent] = useState(null);\n  const {\n    page = 1\n  } = queryString.parse(location.search);\n  useEffect(() => {\n    getPostsApi(page, 8).then(response => {\n      if ((response === null || response === void 0 ? void 0 : response.code) !== 200) {\n        notification[\"warning\"]({\n          message: response.message\n        });\n      } else {\n        setPosts(response.posts);\n      }\n    }).catch(() => {\n      notification[\"error\"]({\n        message: \"Error del servidor.\"\n      });\n    });\n    setReloadPosts(false);\n  }, [page, reloadPosts]);\n\n  const addPost = () => {\n    setIsVisibleModal(true);\n    setModalTitle(\"Creando nuevo post\");\n    setModalContent( /*#__PURE__*/React.createElement(AddEditPostForm, {\n      setIsVisibleModal: setIsVisibleModal,\n      isVisibleModal: isVisibleModal,\n      setReloadPosts: setReloadPosts,\n      post: null,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"blog-add-post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: addPost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, \"Nuevo post\")), /*#__PURE__*/React.createElement(PostsList, {\n    posts: posts,\n    setReloadPosts: setReloadPosts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Pagination, {\n    posts: posts,\n    location: location,\n    history: history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    title: modalTitle,\n    isVisible: isVisibleModal,\n    setIsVisible: setIsVisibleModal,\n    width: \"75%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, modalContent));\n}\n\nexport default withRouter(Blog);","map":{"version":3,"sources":["C:/Users/Antonio/OneDrive/CursoMERN/ProyectoCurso/client/src/pages/admin/Blog/Blog.js"],"names":["React","useEffect","useState","Button","notification","Modal","queryString","withRouter","getPostsApi","PostsList","Pagination","AddEditPostForm","Blog","props","history","location","posts","setPosts","reloadPosts","setReloadPosts","modalTitle","setModalTitle","isVisibleModal","setIsVisibleModal","modalContent","setModalContent","page","parse","search","then","response","code","message","catch","addPost"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {Button,notification} from \"antd\";\r\nimport Modal from \"../../../Modal\";\r\nimport queryString from \"query-string\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport { getPostsApi } from \"../../../api/post\";\r\nimport PostsList from \"../../../components/Admin/Blog/PostsList\";\r\nimport Pagination from \"../../../components/Pagination\";\r\nimport AddEditPostForm from \"../../../components/Admin/Blog/AddEditPostForm\";\r\n\r\nimport \"./Blog.scss\";\r\n\r\n  function Blog(props) {\r\n    const {history,location} = props;\r\n    const [posts,setPosts] = useState({});\r\n    const [reloadPosts, setReloadPosts] = useState(false);\r\n    const [modalTitle, setModalTitle] = useState(\"\");\r\n    const [isVisibleModal, setIsVisibleModal] = useState(false);\r\n    const [modalContent, setModalContent] = useState(null);\r\n    const {page = 1} = queryString.parse(location.search);\r\n  \r\n    useEffect(() => {\r\n     getPostsApi(page,8).then(response =>{\r\n       if(response?.code !==200){\r\n         notification[\"warning\"]({\r\n           message: response.message\r\n         });\r\n       }else{\r\n         setPosts(response.posts)\r\n       }\r\n     }).catch(() =>{\r\n       notification[\"error\"]({\r\n         message:\"Error del servidor.\"\r\n       })\r\n     })\r\n     setReloadPosts(false);\r\n    }, [page, reloadPosts])\r\n\r\n    const addPost= () =>{\r\n      setIsVisibleModal(true);\r\n      setModalTitle(\"Creando nuevo post\")\r\n      setModalContent(\r\n      <AddEditPostForm\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        isVisibleModal={isVisibleModal}\r\n        setReloadPosts={setReloadPosts}\r\n        post={null}\r\n      />)\r\n    }\r\n    return (\r\n        <div className=\"blog\">\r\n           <div className=\"blog-add-post\">\r\n                <Button \r\n                type=\"primary\"\r\n                onClick={addPost}\r\n                >\r\n                    Nuevo post\r\n                </Button>\r\n           </div>\r\n\r\n           <PostsList posts={posts} setReloadPosts={setReloadPosts}/>\r\n           <Pagination posts={posts} location={location} history={history}  />\r\n          <Modal\r\n            title={modalTitle}\r\n            isVisible={isVisibleModal}\r\n            setIsVisible={setIsVisibleModal}\r\n            width=\"75%\"\r\n          >\r\n            {modalContent}\r\n          </Modal>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Blog);\r\n"]},"metadata":{},"sourceType":"module"}