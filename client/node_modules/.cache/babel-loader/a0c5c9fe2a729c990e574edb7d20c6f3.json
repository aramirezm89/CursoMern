{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Form,Input,Select,Button,Row,Col,notification}from\"antd\";import{UserAddOutlined,LockOutlined,MailOutlined}from\"../../../../node_modules/@ant-design/icons\";import{singUpAdminApi}from\"../../../api/user\";import{getAccessTokenApi}from\"../../../api/auth\";import{emailValidation,minLengthValidation}from\"../../../utils/formValidation\";import\"./AddUserForm.scss\";export default function AddUserForm(props){var setIsVisibleModal=props.setIsVisibleModal,setReloadUsers=props.setReloadUsers;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];var addUser=function addUser(){if(!userData.name||!userData.lastName||!userData.email||!userData.password||!userData.role){notification[\"error\"]({message:\"Todos los campos son obligatorios.\"});}else if(userData.password!==userData.repeatPassword){notification[\"error\"]({message:\"Las contrase√±as deben ser iguales.\"});}else{var accessToken=getAccessTokenApi();singUpAdminApi(accessToken,userData).then(function(response){notification[\"success\"]({message:response});setIsVisibleModal(false);setReloadUsers(true);setUserData({});}).catch(function(err){notification[\"error\"]({message:err});});}};return/*#__PURE__*/React.createElement(\"div\",{className:\"add-user-form\"},/*#__PURE__*/React.createElement(AddForm,{userData:userData,setUserData:setUserData,addUser:addUser}));}function AddForm(props){var userData=props.userData,setUserData=props.setUserData,addUser=props.addUser;var Option=Select.Option;var _useState3=useState({email:false,password:false,repeatPassword:false}),_useState4=_slicedToArray(_useState3,2),inputValid=_useState4[0],setInputValid=_useState4[1];var inputValidation=function inputValidation(e){var _e$target=e.target,type=_e$target.type,name=_e$target.name;if(type===\"email\"){setInputValid(_objectSpread({},inputValid,_defineProperty({},name,emailValidation(e.target))));}if(type===\"password\"){setInputValid(_objectSpread({},inputValid,_defineProperty({},name,minLengthValidation(e.target,6))));}};return/*#__PURE__*/React.createElement(Form,{className:\"form-add\",onFinish:addUser},/*#__PURE__*/React.createElement(Row,{gutter:24},/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserAddOutlined,null),placeholder:\"Nombre\",value:userData.name,onChange:function onChange(e){setUserData(_objectSpread({},userData,{name:e.target.value}));}}))),/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(UserAddOutlined,null),placeholder:\"Apeliido\",value:userData.lastName,onChange:function onChange(e){setUserData(_objectSpread({},userData,{lastName:e.target.value}));}})))),/*#__PURE__*/React.createElement(Row,{gutter:24},/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(MailOutlined,null),type:\"email\",name:\"email\",placeholder:\"Email\",value:userData.email,onChange:(function(e){setUserData(_objectSpread({},userData,{email:e.target.value}));},inputValidation)}))),/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Select,{placeholder:\"Selecciona un rol\",onChange:function onChange(e){setUserData(_objectSpread({},userData,{role:e}));},value:userData.role},/*#__PURE__*/React.createElement(Option,{value:\"admin\"},\"Administrador\"),/*#__PURE__*/React.createElement(Option,{value:\"editor\"},\"Editor\"),/*#__PURE__*/React.createElement(Option,{value:\"reviewer\"},\"Revisor\"))))),/*#__PURE__*/React.createElement(Row,{gutter:24},/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",prefix:/*#__PURE__*/React.createElement(LockOutlined,null),placeholder:\"Contrase\\xF1a\",value:userData.password,onChange:(function(e){setUserData(_objectSpread({},userData,{password:e.target.value}));},inputValidation)}))),/*#__PURE__*/React.createElement(Col,{span:12},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{type:\"password\",name:\"password\",prefix:/*#__PURE__*/React.createElement(LockOutlined,null),placeholder:\"Repita su contrase\\xF1a\",value:userData.repeatPassword,onChange:(function(e){setUserData(_objectSpread({},userData,{repeatPassword:e.target.value}));},inputValidation)})))),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"btn-submit\"},\"Crear Usuario\")));}","map":{"version":3,"sources":["C:/Users/metal/OneDrive/CursoMERN/ProyectoCurso/client/src/components/Users/AddUserForm/AddUserForm.js"],"names":["React","useState","Form","Input","Select","Button","Row","Col","notification","UserAddOutlined","LockOutlined","MailOutlined","singUpAdminApi","getAccessTokenApi","emailValidation","minLengthValidation","AddUserForm","props","setIsVisibleModal","setReloadUsers","userData","setUserData","addUser","name","lastName","email","password","role","message","repeatPassword","accessToken","then","response","catch","err","AddForm","Option","inputValid","setInputValid","inputValidation","e","target","type","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Form, Input, Select, Button, Row, Col, notification } from \"antd\";\r\nimport {\r\n  UserAddOutlined,\r\n  LockOutlined,\r\n  MailOutlined,\r\n} from \"../../../../node_modules/@ant-design/icons\";\r\nimport { singUpAdminApi } from \"../../../api/user\";\r\nimport { getAccessTokenApi } from \"../../../api/auth\";\r\nimport {\r\n  emailValidation,\r\n  minLengthValidation,\r\n} from \"../../../utils/formValidation\";\r\n\r\nimport \"./AddUserForm.scss\";\r\n\r\nexport default function AddUserForm(props) {\r\n  const { setIsVisibleModal, setReloadUsers } = props;\r\n  const [userData, setUserData] = useState({});\r\n\r\n  const addUser = () => {\r\n    if (\r\n      !userData.name ||\r\n      !userData.lastName ||\r\n      !userData.email ||\r\n      !userData.password ||\r\n      !userData.role\r\n    ) {\r\n      notification[\"error\"]({\r\n        message: \"Todos los campos son obligatorios.\",\r\n      });\r\n    } else if (userData.password !== userData.repeatPassword) {\r\n      notification[\"error\"]({\r\n        message: \"Las contrase√±as deben ser iguales.\",\r\n      });\r\n      \r\n    } else {\r\n      const accessToken =  getAccessTokenApi();\r\n\r\n      singUpAdminApi(accessToken, userData)\r\n      .then(response => {\r\n          notification[\"success\"]({\r\n            message: response\r\n          \r\n          })\r\n          setIsVisibleModal(false);\r\n          setReloadUsers(true);\r\n          setUserData({});\r\n        })\r\n        .catch((err) => {\r\n          notification[\"error\"]({ message: err });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"add-user-form\">\r\n      <AddForm\r\n        userData={userData}\r\n        setUserData={setUserData}\r\n        addUser={addUser}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AddForm(props) {\r\n  const { userData, setUserData, addUser } = props;\r\n  const { Option } = Select;\r\n\r\n  const [inputValid, setInputValid] = useState({\r\n    email: false,\r\n    password: false,\r\n    repeatPassword: false,\r\n  });\r\n\r\n  const inputValidation = (e) =>{\r\n    const {type, name} = e.target;\r\n\r\n    if(type ===\"email\"){\r\n      setInputValid({\r\n        ...inputValid,\r\n        [name]: emailValidation(e.target)\r\n      })\r\n    }\r\n\r\n    if(type ===\"password\"){\r\n      setInputValid({\r\n        ...inputValid,\r\n        [name]: minLengthValidation(e.target,6)\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  return (\r\n    <Form className=\"form-add\" onFinish={addUser}>\r\n      <Row gutter={24}>\r\n        <Col span={12}>\r\n          <Form.Item>\r\n            <Input\r\n              prefix={<UserAddOutlined />}\r\n              placeholder=\"Nombre\"\r\n              value={userData.name}\r\n              onChange={(e) => {\r\n\r\n                setUserData({\r\n                  ...userData,\r\n                  name: e.target.value,\r\n                });\r\n              }}\r\n            />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item>\r\n            <Input\r\n              prefix={<UserAddOutlined />}\r\n              placeholder=\"Apeliido\"\r\n              value={userData.lastName}\r\n              onChange={(e) => {\r\n                setUserData({\r\n                  ...userData,\r\n                  lastName: e.target.value,\r\n                });\r\n              }}\r\n            />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={24}>\r\n        <Col span={12}>\r\n          <Form.Item>\r\n            <Input\r\n              prefix={<MailOutlined />}\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              value={userData.email}\r\n              onChange={(e) => {\r\n                setUserData({\r\n                  ...userData,\r\n                  email: e.target.value,\r\n                });\r\n              },inputValidation}\r\n            />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item>\r\n            <Select\r\n              placeholder=\"Selecciona un rol\"\r\n              onChange={(e) => {\r\n                setUserData({\r\n                  ...userData,\r\n                  role: e,\r\n                });\r\n              }}\r\n              value={userData.role}\r\n            >\r\n              <Option value=\"admin\">Administrador</Option>\r\n              <Option value=\"editor\">Editor</Option>\r\n              <Option value=\"reviewer\">Revisor</Option>\r\n            </Select>\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <Row gutter={24}>\r\n        <Col span={12}>\r\n          <Form.Item>\r\n            <Input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              prefix={<LockOutlined />}\r\n              placeholder=\"Contrase√±a\"\r\n              value={userData.password}\r\n              onChange={(e) => {\r\n                setUserData({\r\n                  ...userData,\r\n                  password: e.target.value,\r\n                });\r\n              },inputValidation}\r\n            />\r\n          </Form.Item>\r\n        </Col>\r\n        <Col span={12}>\r\n          <Form.Item>\r\n            <Input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              prefix={<LockOutlined />}\r\n              placeholder=\"Repita su contrase√±a\"\r\n              value={userData.repeatPassword}\r\n              onChange={(e) => {\r\n                setUserData({\r\n                  ...userData,\r\n                  repeatPassword: e.target.value,\r\n                });\r\n              },inputValidation}\r\n            />\r\n          </Form.Item>\r\n        </Col>\r\n      </Row>\r\n      <Form.Item>\r\n        <Button type=\"primary\" htmlType=\"submit\" className=\"btn-submit\">\r\n          Crear Usuario\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}