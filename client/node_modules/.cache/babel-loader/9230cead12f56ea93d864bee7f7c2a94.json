{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Form,Button,Input,notification}from\"antd\";import{KeyOutlined,GiftOutlined,DollarOutlined,LinkOutlined}from\"@ant-design/icons\";import{addCourseApi,updateCourseApi}from\"../../../../api/course\";import\"./AddEditCourseForm.scss\";import{getAccessTokenApi}from'../../../../api/auth';export default function AddEditCourseForm(props){var setIsVisibleModal=props.setIsVisibleModal,setReloadCourses=props.setReloadCourses,courses=props.courses;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),courseData=_useState2[0],setCourseData=_useState2[1];useEffect(function(){courses?setCourseData(courses):setCourseData({});},[courses]);var addCourse=function addCourse(){if(!courseData.idCourse){notification[\"error\"]({message:\"La id del curso es obligatoria.\"});}else{var accesToken=getAccessTokenApi();addCourseApi(accesToken,courseData).then(function(response){var typeNotification=response.code===200?\"success\":\"warning\";notification[typeNotification]({message:response.message});setIsVisibleModal(false);setReloadCourses(true);setCourseData({});}).catch(function(){notification[\"error\"]({message:\"Error del servidor, intentelo más tarde\"});});}};var updateCourse=function updateCourse(){var accesToken=getAccessTokenApi();updateCourseApi(accesToken,courses._id,courseData).then(function(response){var typeNotification=response.code===200?\"success\":\"warning\";notification[typeNotification]({message:response.message});setIsVisibleModal(false);setReloadCourses(true);setCourseData({});}).catch(function(){notification[\"error\"]({message:\"Error del servidor, intentelo más tarde.\"});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"add-Edit-course-form\"},/*#__PURE__*/React.createElement(AddEditForm,{courses:courses,addCourse:addCourse,updateCourse:updateCourse,setCourseData:setCourseData,courseData:courseData}));}function AddEditForm(props){var addCourse=props.addCourse,updateCourse=props.updateCourse,courses=props.courses,courseData=props.courseData,setCourseData=props.setCourseData;return/*#__PURE__*/React.createElement(Form,{className:\"form-add-edit\",onFinish:courses?function(){return updateCourse();}:function(){return addCourse();}},/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(KeyOutlined,null),placeholder:\"ID del curso\",value:courseData.idCourse,onChange:function onChange(e){return setCourseData(_objectSpread({},courseData,{idCourse:e.target.value}));},disabled:courses?true:false})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(LinkOutlined,null),placeholder:\"URL del curso\",value:courseData.link,onChange:function onChange(e){return setCourseData(_objectSpread({},courseData,{link:e.target.value}));}})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(GiftOutlined,null),placeholder:\"Cupon de descuento\",value:courseData.coupon,onChange:function onChange(e){return setCourseData(_objectSpread({},courseData,{coupon:e.target.value}));}})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Input,{prefix:/*#__PURE__*/React.createElement(DollarOutlined,null),placeholder:\"Precio del curso\",value:courseData.price,onChange:function onChange(e){return setCourseData(_objectSpread({},courseData,{price:e.target.value}));}})),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"btn-submit\"},courses?\"Actualizar curso\":\"Crear curso\")));}","map":{"version":3,"sources":["C:/Users/metal/OneDrive/CursoMERN/ProyectoCurso/client/src/components/Admin/Courses/AddEditCourseForm/AddEditCourseForm.js"],"names":["React","useState","useEffect","Form","Button","Input","notification","KeyOutlined","GiftOutlined","DollarOutlined","LinkOutlined","addCourseApi","updateCourseApi","getAccessTokenApi","AddEditCourseForm","props","setIsVisibleModal","setReloadCourses","courses","courseData","setCourseData","addCourse","idCourse","message","accesToken","then","response","typeNotification","code","catch","updateCourse","_id","AddEditForm","e","target","value","link","coupon","price"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport {Form,Button,Input,notification} from \"antd\";\r\nimport {KeyOutlined,GiftOutlined,DollarOutlined,LinkOutlined} from \"@ant-design/icons\";\r\nimport {addCourseApi, updateCourseApi } from \"../../../../api/course\"\r\n\r\nimport \"./AddEditCourseForm.scss\";\r\nimport { getAccessTokenApi } from '../../../../api/auth';\r\n\r\nexport default function AddEditCourseForm(props) {\r\n    const {setIsVisibleModal, setReloadCourses, courses} = props;\r\n    const [courseData, setCourseData] = useState({});\r\n\r\n    useEffect(() =>{\r\n       courses ? setCourseData(courses) : setCourseData({});\r\n    },[courses])\r\n\r\n\r\n    const addCourse = () =>{\r\n       \r\n        if(!courseData.idCourse){\r\n            notification[\"error\"]({\r\n                message:\"La id del curso es obligatoria.\"\r\n            })\r\n        }else{\r\n            const accesToken =  getAccessTokenApi();\r\n            addCourseApi(accesToken, courseData).then(response =>{\r\n                const typeNotification = response.code === 200 ? \"success\" : \"warning\"\r\n\r\n                notification[typeNotification]({\r\n                    message: response.message\r\n                })\r\n\r\n                setIsVisibleModal(false);\r\n                setReloadCourses(true);\r\n                setCourseData({});\r\n            }).catch( () =>{\r\n                notification[\"error\"]({\r\n                    message:\"Error del servidor, intentelo más tarde\"\r\n                })\r\n            })\r\n        }\r\n    }\r\n\r\n    const updateCourse = () =>{\r\n       const accesToken = getAccessTokenApi();\r\n\r\n       updateCourseApi(accesToken,courses._id,courseData).then(response =>{\r\n           const typeNotification = response.code === 200 ? \"success\" :\"warning\";\r\n\r\n           notification[typeNotification]({\r\n                message: response.message\r\n           })\r\n           setIsVisibleModal(false);\r\n           setReloadCourses(true);\r\n           setCourseData({});\r\n       })\r\n       .catch( () =>{\r\n           notification[\"error\"]({\r\n               message:\"Error del servidor, intentelo más tarde.\"\r\n           })\r\n       })\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"add-Edit-course-form\">\r\n            <AddEditForm\r\n                courses={courses}\r\n                addCourse={addCourse}\r\n                updateCourse={updateCourse}\r\n                setCourseData = {setCourseData}\r\n                courseData = {courseData}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction AddEditForm(props){\r\n    const {addCourse,updateCourse,courses,courseData,setCourseData} = props;\r\n  \r\n    return(\r\n            <Form \r\n            className=\"form-add-edit\"\r\n            onFinish={courses ?() => updateCourse() : ()=> addCourse()}\r\n            >\r\n                <Form.Item>\r\n                    <Input \r\n                        prefix={<KeyOutlined/>}\r\n                        placeholder=\"ID del curso\"\r\n                        value={courseData.idCourse}\r\n                        onChange={e => setCourseData({...courseData, idCourse: e.target.value})}\r\n                        disabled={courses ?true : false}\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Input \r\n                        prefix={<LinkOutlined/>}\r\n                        placeholder=\"URL del curso\"\r\n                        value={courseData.link}\r\n                        onChange={e => setCourseData({...courseData, link:e.target.value})}\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Input \r\n                        prefix={<GiftOutlined/>}\r\n                        placeholder=\"Cupon de descuento\"\r\n                        value={courseData.coupon}\r\n                        onChange={ e => setCourseData({...courseData, coupon: e.target.value})}\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Input \r\n                        prefix={<DollarOutlined/>}\r\n                        placeholder=\"Precio del curso\"\r\n                        value={courseData.price}\r\n                        onChange={ e => setCourseData({...courseData, price: e.target.value})}\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Button\r\n                     type=\"primary\"\r\n                     htmlType=\"submit\"\r\n                     className=\"btn-submit\"\r\n                    >\r\n                        {courses ? \"Actualizar curso\" : \"Crear curso\"}\r\n                    </Button>\r\n                </Form.Item>\r\n            </Form>\r\n        )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}