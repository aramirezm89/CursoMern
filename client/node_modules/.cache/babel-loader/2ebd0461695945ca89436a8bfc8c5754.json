{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\metal\\\\OneDrive\\\\CursoMERN\\\\ProyectoCurso\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Switch,List,Avatar,Button,notification,Modal as ModalAntd}from\"antd\";import{EditOutlined,StopOutlined,DeleteOutlined,CheckOutlined}from\"@ant-design/icons\";import EditUserForm from\"../EditUserForm\";import AddUserForm from\"../AddUserForm\";import{getAvatarApi,activateUserApi,deleteUserApi}from\"../../../api/user\";import{getAccessTokenApi}from\"../../../api/auth\";import Modal from\"../../../Modal\";import NoAvatar from\"../../../assets/images/png/9.1 no-avatar.png\";import\".//ListUsers.scss\";var confirm=ModalAntd.confirm;export default function ListUsers(props){var usersActive=props.usersActive,usersInactive=props.usersInactive,setReloadUsers=props.setReloadUsers;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),viewUsersActive=_useState2[0],setViewUsersActive=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isVisibleModal=_useState4[0],setIsVisibleModal=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),modalTitle=_useState6[0],setModalTitle=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),modalContent=_useState8[0],setModalContent=_useState8[1];var addUserModal=function addUserModal(){setIsVisibleModal(true);setModalTitle(\"Creando nuevo usuario\");setModalContent(/*#__PURE__*/React.createElement(AddUserForm,{setIsVisibleModal:setIsVisibleModal,setReloadUsers:setReloadUsers}));};return/*#__PURE__*/React.createElement(\"div\",{className:\"list-users\"},/*#__PURE__*/React.createElement(\"div\",{className:\"list-users-header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"list-users-header-switch\"},/*#__PURE__*/React.createElement(Switch,{defaultChecked:true,onChange:function onChange(){setViewUsersActive(!viewUsersActive);}}),/*#__PURE__*/React.createElement(\"span\",null,viewUsersActive?\" Usuarios Activos\":\" Usuarios Inactivos\")),/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:addUserModal},\"Nuevo Usuario...\")),viewUsersActive?/*#__PURE__*/React.createElement(UsersActive,{usersActive:usersActive,setIsVisibleModal:setIsVisibleModal,setModalTitle:setModalTitle,setModalContent:setModalContent,setReloadUsers:setReloadUsers}):/*#__PURE__*/React.createElement(UsersInactive,{usersInactive:usersInactive,setReloadUsers:setReloadUsers}),/*#__PURE__*/React.createElement(Modal,{title:modalTitle,isVisible:isVisibleModal,setIsVisible:setIsVisibleModal},modalContent));}function UsersActive(props){var usersActive=props.usersActive,setIsVisibleModal=props.setIsVisibleModal,setModalTitle=props.setModalTitle,setModalContent=props.setModalContent,setReloadUsers=props.setReloadUsers;var editUser=function editUser(user){setIsVisibleModal(true);setModalTitle(\"Editando Usuario: \".concat(user.name,\" \").concat(user.lastName));setModalContent(/*#__PURE__*/React.createElement(EditUserForm,{user:user,setIsVisibleModal:setIsVisibleModal,setReloadUsers:setReloadUsers}));};return/*#__PURE__*/React.createElement(List,{className:\"users-active\",itemLayout:\"horizontal\",dataSource:usersActive,renderItem:function renderItem(user){return/*#__PURE__*/React.createElement(UserActive,{user:user,editUser:editUser,setReloadUsers:setReloadUsers});}});}function UserActive(props){var user=props.user,editUser=props.editUser,setReloadUsers=props.setReloadUsers;var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),avatar=_useState10[0],setAvatar=_useState10[1];useEffect(function(){if(user.avatar){getAvatarApi(user.avatar).then(function(response){setAvatar(response);});}else{setAvatar(null);}},[user]);var desactivateUser=function desactivateUser(){var accessToken=getAccessTokenApi();activateUserApi(accessToken,user._id,false).then(function(response){notification[\"success\"]({message:response});setReloadUsers(true);}).catch(function(err){notification[\"error\"]({message:err});});};var showDeleteConfirm=function showDeleteConfirm(){var accessToken=getAccessTokenApi();confirm({title:\"Eliminando el usuario\",content:\"Estas seguro que deseas eliminar a \".concat(user.email),okText:\"Eliminar\",okType:\"danger\",cancelText:\"Cancelar\",onOk:function onOk(){deleteUserApi(accessToken,user._id).then(function(response){notification[\"success\"]({message:response});setReloadUsers(true);}).catch(function(err){notification[\"error\"]({message:err});});}});};return/*#__PURE__*/React.createElement(List.Item,{actions:[/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:function onClick(){return editUser(user);},icon:/*#__PURE__*/React.createElement(EditOutlined,null)}),/*#__PURE__*/React.createElement(Button,{type:\"danger\",onClick:desactivateUser,icon:/*#__PURE__*/React.createElement(StopOutlined,null),title:\"Desactivar Ususario\"}),/*#__PURE__*/React.createElement(Button,{type:\"danger\",onClick:showDeleteConfirm,icon:/*#__PURE__*/React.createElement(DeleteOutlined,null),tile:\"Eliminar Usuario\"})]},/*#__PURE__*/React.createElement(List.Item.Meta,{avatar:/*#__PURE__*/React.createElement(Avatar,{src:avatar?avatar:NoAvatar}),title:\"\\n            \".concat(user.name?user.name:\"No existe nombre\",\"\\n            \").concat(user.lastName?user.lastName:\"No existe Apellido\",\"\\n        \\n            \"),description:user.email}));}function UsersInactive(props){var usersInactive=props.usersInactive,setReloadUsers=props.setReloadUsers;return/*#__PURE__*/React.createElement(List,{className:\"users-active\",itemLayout:\"horizontal\",dataSource:usersInactive,renderItem:function renderItem(user){return/*#__PURE__*/React.createElement(UserInactive,{user:user,setReloadUsers:setReloadUsers});}});}function UserInactive(props){var user=props.user,setReloadUsers=props.setReloadUsers;var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),avatar=_useState12[0],setAvatar=_useState12[1];useEffect(function(){if(user.avatar){getAvatarApi(user.avatar).then(function(response){setAvatar(response);});}else{setAvatar(null);}},[user]);var activateUser=function activateUser(){var token=getAccessTokenApi();activateUserApi(token,user._id,true).then(function(response){notification[\"success\"]({message:response});setReloadUsers(true);}).catch(function(err){notification[\"error\"]({message:err.message});});};var showDeleteConfirm=function showDeleteConfirm(){var accessToken=getAccessTokenApi();confirm({title:\"Eliminando el usuario\",content:\"Estas seguro que deseas eliminar a \".concat(user.email),okText:\"Eliminar\",okType:\"danger\",cancelText:\"Cancelar\",onOk:function onOk(){deleteUserApi(accessToken,user._id).then(function(response){notification[\"success\"]({message:response});setReloadUsers(true);}).catch(function(err){notification[\"error\"]({message:err});});}});};return/*#__PURE__*/React.createElement(List.Item,{actions:[/*#__PURE__*/React.createElement(Button,{type:\"primary\",onClick:activateUser,icon:/*#__PURE__*/React.createElement(CheckOutlined,null)}),/*#__PURE__*/React.createElement(Button,{type:\"danger\",onClick:showDeleteConfirm,icon:/*#__PURE__*/React.createElement(DeleteOutlined,null)})]},/*#__PURE__*/React.createElement(List.Item.Meta,{avatar:/*#__PURE__*/React.createElement(Avatar,{src:avatar?avatar:NoAvatar}),title:\"\\n                \".concat(user.name?user.name:\"No existe nombre\",\"\\n                \").concat(user.lastName?user.lastName:\"No existe Apellido\",\"\\n                \\n                \"),description:user.email}));}","map":{"version":3,"sources":["C:/Users/metal/OneDrive/CursoMERN/ProyectoCurso/client/src/components/Users/ListUsers/ListUsers.js"],"names":["React","useState","useEffect","Switch","List","Avatar","Button","notification","Modal","ModalAntd","EditOutlined","StopOutlined","DeleteOutlined","CheckOutlined","EditUserForm","AddUserForm","getAvatarApi","activateUserApi","deleteUserApi","getAccessTokenApi","NoAvatar","confirm","ListUsers","props","usersActive","usersInactive","setReloadUsers","viewUsersActive","setViewUsersActive","isVisibleModal","setIsVisibleModal","modalTitle","setModalTitle","modalContent","setModalContent","addUserModal","UsersActive","editUser","user","name","lastName","UserActive","avatar","setAvatar","then","response","desactivateUser","accessToken","_id","message","catch","err","showDeleteConfirm","title","content","email","okText","okType","cancelText","onOk","UsersInactive","UserInactive","activateUser","token"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Switch,\r\n  List,\r\n  Avatar,\r\n  Button,\r\n  notification,\r\n  Modal as ModalAntd,\r\n} from \"antd\";\r\nimport {\r\n  EditOutlined,\r\n  StopOutlined,\r\n  DeleteOutlined,\r\n  CheckOutlined,\r\n} from \"@ant-design/icons\";\r\nimport EditUserForm from \"../EditUserForm\";\r\nimport AddUserForm from \"../AddUserForm\";\r\nimport {\r\n  getAvatarApi,\r\n  activateUserApi,\r\n  deleteUserApi,\r\n} from \"../../../api/user\";\r\nimport { getAccessTokenApi } from \"../../../api/auth\";\r\nimport Modal from \"../../../Modal\";\r\n\r\nimport NoAvatar from \"../../../assets/images/png/9.1 no-avatar.png\";\r\nimport \".//ListUsers.scss\";\r\n\r\nconst { confirm } = ModalAntd;\r\n\r\nexport default function ListUsers(props) {\r\n  const { usersActive, usersInactive, setReloadUsers } = props;\r\n  const [viewUsersActive, setViewUsersActive] = useState(true);\r\n  const [isVisibleModal, setIsVisibleModal] = useState(false);\r\n  const [modalTitle, setModalTitle] = useState(\"\");\r\n  const [modalContent, setModalContent] = useState(null);\r\n\r\n  const addUserModal = () => {\r\n    setIsVisibleModal(true);\r\n    setModalTitle(\"Creando nuevo usuario\");\r\n    setModalContent(\r\n      <AddUserForm\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        setReloadUsers={setReloadUsers}\r\n      />\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"list-users\">\r\n      <div className=\"list-users-header\">\r\n        <div className=\"list-users-header-switch\">\r\n          <Switch\r\n            defaultChecked\r\n            onChange={() => {\r\n              setViewUsersActive(!viewUsersActive);\r\n            }}\r\n          />\r\n          <span>\r\n            {viewUsersActive ? \" Usuarios Activos\" : \" Usuarios Inactivos\"}\r\n          </span>\r\n        </div>\r\n\r\n        <Button type=\"primary\" onClick={addUserModal}>\r\n          Nuevo Usuario...\r\n        </Button>\r\n      </div>\r\n      {/*  */}\r\n\r\n      {viewUsersActive ? (\r\n        <UsersActive\r\n          usersActive={usersActive}\r\n          setIsVisibleModal={setIsVisibleModal}\r\n          setModalTitle={setModalTitle}\r\n          setModalContent={setModalContent}\r\n          setReloadUsers={setReloadUsers}\r\n        />\r\n      ) : (\r\n        <UsersInactive\r\n          usersInactive={usersInactive}\r\n          setReloadUsers={setReloadUsers}\r\n        />\r\n      )}\r\n\r\n      <Modal\r\n        title={modalTitle}\r\n        isVisible={isVisibleModal}\r\n        setIsVisible={setIsVisibleModal}\r\n      >\r\n        {modalContent}\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UsersActive(props) {\r\n  const {\r\n    usersActive,\r\n    setIsVisibleModal,\r\n    setModalTitle,\r\n    setModalContent,\r\n    setReloadUsers,\r\n  } = props;\r\n\r\n  const editUser = (user) => {\r\n    setIsVisibleModal(true);\r\n    setModalTitle(`Editando Usuario: ${user.name} ${user.lastName}`);\r\n    setModalContent(\r\n      <EditUserForm\r\n        user={user}\r\n        setIsVisibleModal={setIsVisibleModal}\r\n        setReloadUsers={setReloadUsers}\r\n      />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <List\r\n      className=\"users-active\"\r\n      itemLayout=\"horizontal\"\r\n      dataSource={usersActive}\r\n      renderItem={(user) => (\r\n        <UserActive\r\n          user={user}\r\n          editUser={editUser}\r\n          setReloadUsers={setReloadUsers}\r\n        />\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nfunction UserActive(props) {\r\n  const { user, editUser, setReloadUsers } = props;\r\n  const [avatar, setAvatar] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (user.avatar) {\r\n      getAvatarApi(user.avatar).then((response) => {\r\n        setAvatar(response);\r\n      });\r\n    } else {\r\n      setAvatar(null);\r\n    }\r\n  }, [user]);\r\n\r\n  const desactivateUser = () => {\r\n    const accessToken = getAccessTokenApi();\r\n    activateUserApi(accessToken, user._id, false)\r\n      .then((response) => {\r\n        notification[\"success\"]({\r\n          message: response,\r\n        });\r\n        setReloadUsers(true);\r\n      })\r\n      .catch((err) => {\r\n        notification[\"error\"]({\r\n          message: err,\r\n        });\r\n      });\r\n  };\r\n\r\n  const showDeleteConfirm = () => {\r\n    const accessToken = getAccessTokenApi();\r\n\r\n    confirm({\r\n      title: \"Eliminando el usuario\",\r\n      content: `Estas seguro que deseas eliminar a ${user.email}`,\r\n      okText: \"Eliminar\",\r\n      okType: \"danger\",\r\n      cancelText: \"Cancelar\",\r\n      onOk() {\r\n        deleteUserApi(accessToken, user._id)\r\n          .then((response) => {\r\n            notification[\"success\"]({\r\n              message: response,\r\n            });\r\n            setReloadUsers(true);\r\n          })\r\n          .catch((err) => {\r\n            notification[\"error\"]({\r\n              message: err,\r\n            });\r\n          });\r\n      },\r\n    });\r\n  };\r\n  return (\r\n    <List.Item\r\n      actions={[\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={() => editUser(user)}\r\n          icon={<EditOutlined />}\r\n        />,\r\n\r\n        <Button\r\n          type=\"danger\"\r\n          onClick={desactivateUser}\r\n          icon={<StopOutlined />}\r\n          title=\"Desactivar Ususario\"\r\n        />,\r\n        <Button\r\n          type=\"danger\"\r\n          onClick={showDeleteConfirm}\r\n          icon={<DeleteOutlined />}\r\n          tile=\"Eliminar Usuario\"\r\n        />,\r\n      ]}\r\n    >\r\n      <List.Item.Meta\r\n        avatar={<Avatar src={avatar ? avatar : NoAvatar} />}\r\n        title={`\r\n            ${user.name ? user.name : \"No existe nombre\"}\r\n            ${user.lastName ? user.lastName : \"No existe Apellido\"}\r\n        \r\n            `}\r\n        description={user.email}\r\n      />\r\n    </List.Item>\r\n  );\r\n}\r\n\r\nfunction UsersInactive(props) {\r\n  const { usersInactive, setReloadUsers } = props;\r\n  return (\r\n    <List\r\n      className=\"users-active\"\r\n      itemLayout=\"horizontal\"\r\n      dataSource={usersInactive}\r\n      renderItem={(user) => (\r\n        <UserInactive user={user} setReloadUsers={setReloadUsers} />\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\nfunction UserInactive(props) {\r\n  const { user, setReloadUsers } = props;\r\n  const [avatar, setAvatar] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (user.avatar) {\r\n      getAvatarApi(user.avatar).then((response) => {\r\n        setAvatar(response);\r\n      });\r\n    } else {\r\n      setAvatar(null);\r\n    }\r\n  }, [user]);\r\n\r\n  const activateUser = () => {\r\n    const token = getAccessTokenApi();\r\n    activateUserApi(token, user._id, true)\r\n      .then((response) => {\r\n        notification[\"success\"]({\r\n          message: response,\r\n        });\r\n        setReloadUsers(true);\r\n      })\r\n      .catch((err) => {\r\n        notification[\"error\"]({\r\n          message: err.message,\r\n        });\r\n      });\r\n  };\r\n\r\n  const showDeleteConfirm = () => {\r\n    const accessToken = getAccessTokenApi();\r\n\r\n    confirm({\r\n      title: \"Eliminando el usuario\",\r\n      content: `Estas seguro que deseas eliminar a ${user.email}`,\r\n      okText: \"Eliminar\",\r\n      okType: \"danger\",\r\n      cancelText: \"Cancelar\",\r\n      onOk() {\r\n        deleteUserApi(accessToken, user._id)\r\n          .then((response) => {\r\n            notification[\"success\"]({\r\n              message: response,\r\n            });\r\n            setReloadUsers(true);\r\n          })\r\n          .catch((err) => {\r\n            notification[\"error\"]({\r\n              message: err,\r\n            });\r\n          });\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <List.Item\r\n      actions={[\r\n        <Button\r\n          type=\"primary\"\r\n          onClick={activateUser}\r\n          icon={<CheckOutlined />}\r\n        />,\r\n\r\n        <Button\r\n          type=\"danger\"\r\n          onClick={showDeleteConfirm}\r\n          icon={<DeleteOutlined />}\r\n        />,\r\n      ]}\r\n    >\r\n      <List.Item.Meta\r\n        avatar={<Avatar src={avatar ? avatar : NoAvatar} />}\r\n        title={`\r\n                ${user.name ? user.name : \"No existe nombre\"}\r\n                ${user.lastName ? user.lastName : \"No existe Apellido\"}\r\n                \r\n                `}\r\n        description={user.email}\r\n      />\r\n    </List.Item>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}